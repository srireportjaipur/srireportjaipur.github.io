<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A4 Collage Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    #a4 {
      width: 794px;
      height: 1123px;
      border: 2px solid black;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(5, 1fr);
      gap: 5px;
      background: white;
    }
    #a4 img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .upload-box {
      margin: 10px 0;
    }
    button {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>A4 Collage Generator</h1>
  <p>Upload 10 images (they will be arranged into A4 collage)</p>

  <div class="upload-box">
    <input type="file" accept="image/*" multiple id="imageInput">
  </div>

  <div id="a4"></div>

  <button id="download">Download Collage</button>

  <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
  <script>
    const input = document.getElementById('imageInput');
    const collage = document.getElementById('a4');

    input.addEventListener('change', function () {
      collage.innerHTML = ""; // reset collage
      const files = Array.from(input.files).slice(0, 10); // limit to 10
      files.forEach(file => {
        const img = document.createElement("img");
        img.src = URL.createObjectURL(file);
        collage.appendChild(img);
      });
    });

    document.getElementById("download").addEventListener("click", () => {
      htmlToImage.toBlob(collage, { cacheBust: true })
        .then(function (blob) {
          if (blob) {
            const link = document.createElement('a');
            link.download = 'collage.png';
            link.href = URL.createObjectURL(blob);
            link.click();
            URL.revokeObjectURL(link.href);
          }
        })
        .catch(err => {
          console.error("Error:", err);
        });
    });
  </script>
</body>
</html>
